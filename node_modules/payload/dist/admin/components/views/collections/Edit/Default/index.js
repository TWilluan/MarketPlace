"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "DefaultCollectionEdit", {
    enumerable: true,
    get: function() {
        return DefaultCollectionEdit;
    }
});
const _react = /*#__PURE__*/ _interop_require_wildcard(require("react"));
const _reacti18next = require("react-i18next");
const _getTranslation = require("../../../../../../utilities/getTranslation");
const _DocumentControls = require("../../../../elements/DocumentControls");
const _DocumentFields = require("../../../../elements/DocumentFields");
const _LeaveWithoutSaving = require("../../../../modals/LeaveWithoutSaving");
const _Meta = /*#__PURE__*/ _interop_require_default(require("../../../../utilities/Meta"));
const _Auth = /*#__PURE__*/ _interop_require_default(require("../Auth"));
const _SetStepNav = require("../SetStepNav");
const _Upload = require("../Upload");
const _formatFields = /*#__PURE__*/ _interop_require_default(require("../formatFields"));
require("./index.scss");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
const baseClass = 'collection-default-edit';
const DefaultCollectionEdit = (props)=>{
    const { i18n, t } = (0, _reacti18next.useTranslation)('general');
    const { id, apiURL, collection, data, disableActions, disableLeaveWithoutSaving, fieldTypes, hasSavePermission, internalState, isEditing, onSave, permissions } = props;
    const { auth, upload } = collection;
    const [fields] = (0, _react.useState)(()=>(0, _formatFields.default)(collection, isEditing));
    const operation = isEditing ? 'update' : 'create';
    return /*#__PURE__*/ _react.default.createElement(_react.Fragment, null, /*#__PURE__*/ _react.default.createElement(_Meta.default, {
        description: `${isEditing ? t('editing') : t('creating')} - ${(0, _getTranslation.getTranslation)(collection.labels.singular, i18n)}`,
        keywords: `${(0, _getTranslation.getTranslation)(collection.labels.singular, i18n)}, Payload, CMS`,
        title: `${isEditing ? t('editing') : t('creating')} - ${(0, _getTranslation.getTranslation)(collection.labels.singular, i18n)}`
    }), !(collection.versions?.drafts && collection.versions?.drafts?.autosave) && !disableLeaveWithoutSaving && /*#__PURE__*/ _react.default.createElement(_LeaveWithoutSaving.LeaveWithoutSaving, null), /*#__PURE__*/ _react.default.createElement(_SetStepNav.SetStepNav, {
        collection: collection,
        id: id,
        isEditing: isEditing
    }), /*#__PURE__*/ _react.default.createElement(_DocumentControls.DocumentControls, {
        apiURL: apiURL,
        collection: collection,
        data: data,
        disableActions: disableActions,
        hasSavePermission: hasSavePermission,
        id: id,
        isEditing: isEditing,
        onSave: onSave,
        permissions: permissions
    }), /*#__PURE__*/ _react.default.createElement(_DocumentFields.DocumentFields, {
        BeforeFields: /*#__PURE__*/ _react.default.createElement(_react.Fragment, null, auth && /*#__PURE__*/ _react.default.createElement(_Auth.default, {
            className: `${baseClass}__auth`,
            collection: collection,
            email: data?.email,
            operation: operation,
            readOnly: !hasSavePermission,
            requirePassword: !isEditing,
            useAPIKey: auth.useAPIKey,
            verify: auth.verify
        }), upload && /*#__PURE__*/ _react.default.createElement(_Upload.Upload, {
            collection: collection,
            internalState: internalState
        })),
        fieldTypes: fieldTypes,
        fields: fields,
        hasSavePermission: hasSavePermission,
        permissions: permissions
    }));
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3NyYy9hZG1pbi9jb21wb25lbnRzL3ZpZXdzL2NvbGxlY3Rpb25zL0VkaXQvRGVmYXVsdC9pbmRleC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IEZyYWdtZW50LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgdXNlVHJhbnNsYXRpb24gfSBmcm9tICdyZWFjdC1pMThuZXh0J1xuXG5pbXBvcnQgdHlwZSB7IEZpZWxkVHlwZXMgfSBmcm9tICcuLi8uLi8uLi8uLi9mb3Jtcy9maWVsZC10eXBlcydcbmltcG9ydCB0eXBlIHsgQ29sbGVjdGlvbkVkaXRWaWV3UHJvcHMgfSBmcm9tICcuLi8uLi8uLi90eXBlcydcblxuaW1wb3J0IHsgZ2V0VHJhbnNsYXRpb24gfSBmcm9tICcuLi8uLi8uLi8uLi8uLi8uLi91dGlsaXRpZXMvZ2V0VHJhbnNsYXRpb24nXG5pbXBvcnQgeyBEb2N1bWVudENvbnRyb2xzIH0gZnJvbSAnLi4vLi4vLi4vLi4vZWxlbWVudHMvRG9jdW1lbnRDb250cm9scydcbmltcG9ydCB7IERvY3VtZW50RmllbGRzIH0gZnJvbSAnLi4vLi4vLi4vLi4vZWxlbWVudHMvRG9jdW1lbnRGaWVsZHMnXG5pbXBvcnQgeyBMZWF2ZVdpdGhvdXRTYXZpbmcgfSBmcm9tICcuLi8uLi8uLi8uLi9tb2RhbHMvTGVhdmVXaXRob3V0U2F2aW5nJ1xuaW1wb3J0IE1ldGEgZnJvbSAnLi4vLi4vLi4vLi4vdXRpbGl0aWVzL01ldGEnXG5pbXBvcnQgQXV0aCBmcm9tICcuLi9BdXRoJ1xuaW1wb3J0IHsgU2V0U3RlcE5hdiB9IGZyb20gJy4uL1NldFN0ZXBOYXYnXG5pbXBvcnQgeyBVcGxvYWQgfSBmcm9tICcuLi9VcGxvYWQnXG5pbXBvcnQgZm9ybWF0RmllbGRzIGZyb20gJy4uL2Zvcm1hdEZpZWxkcydcbmltcG9ydCAnLi9pbmRleC5zY3NzJ1xuXG5jb25zdCBiYXNlQ2xhc3MgPSAnY29sbGVjdGlvbi1kZWZhdWx0LWVkaXQnXG5cbmV4cG9ydCBjb25zdCBEZWZhdWx0Q29sbGVjdGlvbkVkaXQ6IFJlYWN0LkZDPFxuICBDb2xsZWN0aW9uRWRpdFZpZXdQcm9wcyAmIHtcbiAgICBmaWVsZFR5cGVzOiBGaWVsZFR5cGVzXG4gIH1cbj4gPSAocHJvcHMpID0+IHtcbiAgY29uc3QgeyBpMThuLCB0IH0gPSB1c2VUcmFuc2xhdGlvbignZ2VuZXJhbCcpXG5cbiAgY29uc3Qge1xuICAgIGlkLFxuICAgIGFwaVVSTCxcbiAgICBjb2xsZWN0aW9uLFxuICAgIGRhdGEsXG4gICAgZGlzYWJsZUFjdGlvbnMsXG4gICAgZGlzYWJsZUxlYXZlV2l0aG91dFNhdmluZyxcbiAgICBmaWVsZFR5cGVzLFxuICAgIGhhc1NhdmVQZXJtaXNzaW9uLFxuICAgIGludGVybmFsU3RhdGUsXG4gICAgaXNFZGl0aW5nLFxuICAgIG9uU2F2ZSxcbiAgICBwZXJtaXNzaW9ucyxcbiAgfSA9IHByb3BzXG5cbiAgY29uc3QgeyBhdXRoLCB1cGxvYWQgfSA9IGNvbGxlY3Rpb25cblxuICBjb25zdCBbZmllbGRzXSA9IHVzZVN0YXRlKCgpID0+IGZvcm1hdEZpZWxkcyhjb2xsZWN0aW9uLCBpc0VkaXRpbmcpKVxuXG4gIGNvbnN0IG9wZXJhdGlvbiA9IGlzRWRpdGluZyA/ICd1cGRhdGUnIDogJ2NyZWF0ZSdcblxuICByZXR1cm4gKFxuICAgIDxGcmFnbWVudD5cbiAgICAgIDxNZXRhXG4gICAgICAgIGRlc2NyaXB0aW9uPXtgJHtpc0VkaXRpbmcgPyB0KCdlZGl0aW5nJykgOiB0KCdjcmVhdGluZycpfSAtICR7Z2V0VHJhbnNsYXRpb24oXG4gICAgICAgICAgY29sbGVjdGlvbi5sYWJlbHMuc2luZ3VsYXIsXG4gICAgICAgICAgaTE4bixcbiAgICAgICAgKX1gfVxuICAgICAgICBrZXl3b3Jkcz17YCR7Z2V0VHJhbnNsYXRpb24oY29sbGVjdGlvbi5sYWJlbHMuc2luZ3VsYXIsIGkxOG4pfSwgUGF5bG9hZCwgQ01TYH1cbiAgICAgICAgdGl0bGU9e2Ake2lzRWRpdGluZyA/IHQoJ2VkaXRpbmcnKSA6IHQoJ2NyZWF0aW5nJyl9IC0gJHtnZXRUcmFuc2xhdGlvbihcbiAgICAgICAgICBjb2xsZWN0aW9uLmxhYmVscy5zaW5ndWxhcixcbiAgICAgICAgICBpMThuLFxuICAgICAgICApfWB9XG4gICAgICAvPlxuICAgICAgeyEoY29sbGVjdGlvbi52ZXJzaW9ucz8uZHJhZnRzICYmIGNvbGxlY3Rpb24udmVyc2lvbnM/LmRyYWZ0cz8uYXV0b3NhdmUpICYmXG4gICAgICAgICFkaXNhYmxlTGVhdmVXaXRob3V0U2F2aW5nICYmIDxMZWF2ZVdpdGhvdXRTYXZpbmcgLz59XG4gICAgICA8U2V0U3RlcE5hdiBjb2xsZWN0aW9uPXtjb2xsZWN0aW9ufSBpZD17aWR9IGlzRWRpdGluZz17aXNFZGl0aW5nfSAvPlxuICAgICAgPERvY3VtZW50Q29udHJvbHNcbiAgICAgICAgYXBpVVJMPXthcGlVUkx9XG4gICAgICAgIGNvbGxlY3Rpb249e2NvbGxlY3Rpb259XG4gICAgICAgIGRhdGE9e2RhdGF9XG4gICAgICAgIGRpc2FibGVBY3Rpb25zPXtkaXNhYmxlQWN0aW9uc31cbiAgICAgICAgaGFzU2F2ZVBlcm1pc3Npb249e2hhc1NhdmVQZXJtaXNzaW9ufVxuICAgICAgICBpZD17aWR9XG4gICAgICAgIGlzRWRpdGluZz17aXNFZGl0aW5nfVxuICAgICAgICBvblNhdmU9e29uU2F2ZX1cbiAgICAgICAgcGVybWlzc2lvbnM9e3Blcm1pc3Npb25zfVxuICAgICAgLz5cbiAgICAgIDxEb2N1bWVudEZpZWxkc1xuICAgICAgICBCZWZvcmVGaWVsZHM9e1xuICAgICAgICAgIDxGcmFnbWVudD5cbiAgICAgICAgICAgIHthdXRoICYmIChcbiAgICAgICAgICAgICAgPEF1dGhcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake2Jhc2VDbGFzc31fX2F1dGhgfVxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb249e2NvbGxlY3Rpb259XG4gICAgICAgICAgICAgICAgZW1haWw9e2RhdGE/LmVtYWlsfVxuICAgICAgICAgICAgICAgIG9wZXJhdGlvbj17b3BlcmF0aW9ufVxuICAgICAgICAgICAgICAgIHJlYWRPbmx5PXshaGFzU2F2ZVBlcm1pc3Npb259XG4gICAgICAgICAgICAgICAgcmVxdWlyZVBhc3N3b3JkPXshaXNFZGl0aW5nfVxuICAgICAgICAgICAgICAgIHVzZUFQSUtleT17YXV0aC51c2VBUElLZXl9XG4gICAgICAgICAgICAgICAgdmVyaWZ5PXthdXRoLnZlcmlmeX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICB7dXBsb2FkICYmIDxVcGxvYWQgY29sbGVjdGlvbj17Y29sbGVjdGlvbn0gaW50ZXJuYWxTdGF0ZT17aW50ZXJuYWxTdGF0ZX0gLz59XG4gICAgICAgICAgPC9GcmFnbWVudD5cbiAgICAgICAgfVxuICAgICAgICBmaWVsZFR5cGVzPXtmaWVsZFR5cGVzfVxuICAgICAgICBmaWVsZHM9e2ZpZWxkc31cbiAgICAgICAgaGFzU2F2ZVBlcm1pc3Npb249e2hhc1NhdmVQZXJtaXNzaW9ufVxuICAgICAgICBwZXJtaXNzaW9ucz17cGVybWlzc2lvbnN9XG4gICAgICAvPlxuICAgIDwvRnJhZ21lbnQ+XG4gIClcbn1cbiJdLCJuYW1lcyI6WyJEZWZhdWx0Q29sbGVjdGlvbkVkaXQiLCJiYXNlQ2xhc3MiLCJwcm9wcyIsImkxOG4iLCJ0IiwidXNlVHJhbnNsYXRpb24iLCJpZCIsImFwaVVSTCIsImNvbGxlY3Rpb24iLCJkYXRhIiwiZGlzYWJsZUFjdGlvbnMiLCJkaXNhYmxlTGVhdmVXaXRob3V0U2F2aW5nIiwiZmllbGRUeXBlcyIsImhhc1NhdmVQZXJtaXNzaW9uIiwiaW50ZXJuYWxTdGF0ZSIsImlzRWRpdGluZyIsIm9uU2F2ZSIsInBlcm1pc3Npb25zIiwiYXV0aCIsInVwbG9hZCIsImZpZWxkcyIsInVzZVN0YXRlIiwiZm9ybWF0RmllbGRzIiwib3BlcmF0aW9uIiwiRnJhZ21lbnQiLCJNZXRhIiwiZGVzY3JpcHRpb24iLCJnZXRUcmFuc2xhdGlvbiIsImxhYmVscyIsInNpbmd1bGFyIiwia2V5d29yZHMiLCJ0aXRsZSIsInZlcnNpb25zIiwiZHJhZnRzIiwiYXV0b3NhdmUiLCJMZWF2ZVdpdGhvdXRTYXZpbmciLCJTZXRTdGVwTmF2IiwiRG9jdW1lbnRDb250cm9scyIsIkRvY3VtZW50RmllbGRzIiwiQmVmb3JlRmllbGRzIiwiQXV0aCIsImNsYXNzTmFtZSIsImVtYWlsIiwicmVhZE9ubHkiLCJyZXF1aXJlUGFzc3dvcmQiLCJ1c2VBUElLZXkiLCJ2ZXJpZnkiLCJVcGxvYWQiXSwicmFuZ2VNYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsiLCJtYXBwaW5ncyI6Ijs7OzsrQkFtQmFBOzs7ZUFBQUE7OzsrREFuQjZCOzhCQUNYO2dDQUtBO2tDQUNFO2dDQUNGO29DQUNJOzZEQUNsQjs2REFDQTs0QkFDVTt3QkFDSjtxRUFDRTtRQUNsQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFUCxNQUFNQyxZQUFZO0FBRVgsTUFBTUQsd0JBSVQsQ0FBQ0U7SUFDSCxNQUFNLEVBQUVDLElBQUksRUFBRUMsQ0FBQyxFQUFFLEdBQUdDLElBQUFBLDRCQUFjLEVBQUM7SUFFbkMsTUFBTSxFQUNKQyxFQUFFLEVBQ0ZDLE1BQU0sRUFDTkMsVUFBVSxFQUNWQyxJQUFJLEVBQ0pDLGNBQWMsRUFDZEMseUJBQXlCLEVBQ3pCQyxVQUFVLEVBQ1ZDLGlCQUFpQixFQUNqQkMsYUFBYSxFQUNiQyxTQUFTLEVBQ1RDLE1BQU0sRUFDTkMsV0FBVyxFQUNaLEdBQUdmO0lBRUosTUFBTSxFQUFFZ0IsSUFBSSxFQUFFQyxNQUFNLEVBQUUsR0FBR1g7SUFFekIsTUFBTSxDQUFDWSxPQUFPLEdBQUdDLElBQUFBLGVBQVEsRUFBQyxJQUFNQyxJQUFBQSxxQkFBWSxFQUFDZCxZQUFZTztJQUV6RCxNQUFNUSxZQUFZUixZQUFZLFdBQVc7SUFFekMscUJBQ0UsNkJBQUNTLGVBQVEsc0JBQ1AsNkJBQUNDLGFBQUk7UUFDSEMsYUFBYSxDQUFDLEVBQUVYLFlBQVlYLEVBQUUsYUFBYUEsRUFBRSxZQUFZLEdBQUcsRUFBRXVCLElBQUFBLDhCQUFjLEVBQzFFbkIsV0FBV29CLE1BQU0sQ0FBQ0MsUUFBUSxFQUMxQjFCLE1BQ0EsQ0FBQztRQUNIMkIsVUFBVSxDQUFDLEVBQUVILElBQUFBLDhCQUFjLEVBQUNuQixXQUFXb0IsTUFBTSxDQUFDQyxRQUFRLEVBQUUxQixNQUFNLGNBQWMsQ0FBQztRQUM3RTRCLE9BQU8sQ0FBQyxFQUFFaEIsWUFBWVgsRUFBRSxhQUFhQSxFQUFFLFlBQVksR0FBRyxFQUFFdUIsSUFBQUEsOEJBQWMsRUFDcEVuQixXQUFXb0IsTUFBTSxDQUFDQyxRQUFRLEVBQzFCMUIsTUFDQSxDQUFDO1FBRUosQ0FBRUssQ0FBQUEsV0FBV3dCLFFBQVEsRUFBRUMsVUFBVXpCLFdBQVd3QixRQUFRLEVBQUVDLFFBQVFDLFFBQU8sS0FDcEUsQ0FBQ3ZCLDJDQUE2Qiw2QkFBQ3dCLHNDQUFrQix1QkFDbkQsNkJBQUNDLHNCQUFVO1FBQUM1QixZQUFZQTtRQUFZRixJQUFJQTtRQUFJUyxXQUFXQTtzQkFDdkQsNkJBQUNzQixrQ0FBZ0I7UUFDZjlCLFFBQVFBO1FBQ1JDLFlBQVlBO1FBQ1pDLE1BQU1BO1FBQ05DLGdCQUFnQkE7UUFDaEJHLG1CQUFtQkE7UUFDbkJQLElBQUlBO1FBQ0pTLFdBQVdBO1FBQ1hDLFFBQVFBO1FBQ1JDLGFBQWFBO3NCQUVmLDZCQUFDcUIsOEJBQWM7UUFDYkMsNEJBQ0UsNkJBQUNmLGVBQVEsUUFDTk4sc0JBQ0MsNkJBQUNzQixhQUFJO1lBQ0hDLFdBQVcsQ0FBQyxFQUFFeEMsVUFBVSxNQUFNLENBQUM7WUFDL0JPLFlBQVlBO1lBQ1prQyxPQUFPakMsTUFBTWlDO1lBQ2JuQixXQUFXQTtZQUNYb0IsVUFBVSxDQUFDOUI7WUFDWCtCLGlCQUFpQixDQUFDN0I7WUFDbEI4QixXQUFXM0IsS0FBSzJCLFNBQVM7WUFDekJDLFFBQVE1QixLQUFLNEIsTUFBTTtZQUd0QjNCLHdCQUFVLDZCQUFDNEIsY0FBTTtZQUFDdkMsWUFBWUE7WUFBWU0sZUFBZUE7O1FBRzlERixZQUFZQTtRQUNaUSxRQUFRQTtRQUNSUCxtQkFBbUJBO1FBQ25CSSxhQUFhQTs7QUFJckIifQ==